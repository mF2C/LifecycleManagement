version: '3'

services:

  # LIFECYCLE
  lifecycle:
    image: mf2c/lifecycle
    expose:
      - "46000"
    ports:
      - "46000:46000"
    environment:
      - CIMI_URL=https://dashboard.mf2c-project.eu/api
      - STANDALONE_MODE=False
      - HOST_IP=192.168.252.41
      - WORKING_DIR_VOLUME=/tmp/compose_files
      - URL_PM_SLA_MANAGER=http://slalite:46030
      - URL_AC_SERVICE_MNGMT=http://service-manager:46200/api/service-management
    volumes:
      - /tmp/compose_files:/tmp/compose_files
      - /var/run/docker.sock:/var/run/docker.sock

  # USER MANAGEMENT
  user-management:
    image: mf2c/user-management
    expose:
      - "46300"
    ports:
      - "46300:46300"
    environment:
      - CIMI_URL=https://dashboard.mf2c-project.eu/api

  # SERVICE MANAGER
  service-manager:
    image: mf2c/service-manager
    expose:
      - "46200"
    ports:
      - "46200:46200"
    environment:
      - CIMI_URL=https://dashboard.mf2c-project.eu

  # SLA MANAGER
  slalite:
    image: mf2c/sla-management:0.1.1
    expose:
      - "46030"
    ports:
      - "46030:8090"
    environment:
      - SLA_CIMIURL=https://dashboard.mf2c-project.eu/api
